DEFAULT: &default
  XNAT_CREDENTIALS_FILE: $HOME/.xnat_credentials
  RUNTIME_FILES_DIR: $HOME/hcp-pipelines/runtime
  EXPECTED_FILES_LIST: $RUNTIME_FILES_DIR/expected_files/$PIPELINE_NAME.txt
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build
  #QUNEX_CONTAINER: /export/HCP/qunex-hcp/production_containers/qunex_0.61.17_FSL603.sif
  QUNEX_CONTAINER: /export/HCP/qunex-hcp/production_containers/qunex_0.62.6_FSL603.sif
  PIPELINES_CONTAINER: /export/HCP/qunex-hcp/production_containers/pipelines.sif
  GRADIENT_COEFFICIENT_PATH: /export/HCP/gradient_coefficient_files
  LOG_DIR: $HOME/XNAT_LOGS
  ARCHIVE_ROOT: /NRG-data/NRG/intradb/archive
  XNAT_SERVER: hcpi-shadow10.nrg.wustl.edu
  PUT_SERVER_LIST: hcpi-shadow11.nrg.wustl.edu hcpi-shadow12.nrg.wustl.edu hcpi-shadow13.nrg.wustl.edu hcpi-shadow14.nrg.wustl.edu hcpi-shadow15.nrg.wustl.edu hcpi-shadow16.nrg.wustl.edu hcpi-shadow17.nrg.wustl.edu
  HCP_LIB_DIR: /pipeline_tools/pipelines/lib
  FREESURFER_LICENSE_PATH: $HOME/freesurfer/license.txt
  CLEAN_OUTPUT_FIRST: false
  WALLTIME_LIMIT_HOURS: 52
  MEM_LIMIT_GBS: 8
  USE_SCRATCH_FOR_PROCESSING: False
  AUTOLAUNCH_AT_END: True
  #PROCESSING_STAGE: PREPARE_SCRIPTS
  PROCESSING_STAGE: CHECK_DATA
  #PROCESSING_STAGE: PROCESS_DATA

#defaults from scripts.yaml:
  GET_DATA_BINDPATH: $ARCHIVE_ROOT,$SINGULARITY_BIND_PATH,$BUILD_DIR
  CHECK_DATA_BINDPATH: $ARCHIVE_ROOT,$SINGULARITY_BIND_PATH
  MARK_RUNNING_STATUS_BINDPATH: $ARCHIVE_ROOT,$SINGULARITY_BIND_PATH
  PUT_DATA_BINDPATH: $ARCHIVE_ROOT,$SINGULARITY_BIND_PATH
  PROCESS_PBS_HASWELL: True
  PROCESS_PBS_K20X: False
  PROCESS_PBS_GPU: 0
  PROCESS_NVIDIA: False
  PROCESS_DATA_BINDPATH: "$GRADIENT_COEFFICIENT_PATH,$ARCHIVE_ROOT,$SINGULARITY_BIND_PATH"

#common_vars:
  SCRATCH_SPACE: /scratch/$USER/buildspace/structural/$PROJECT
  BUILD_SPACE: ${BUILD_DIR}/${PROJECT}
  DIR_PREFIX: ${PIPELINE_NAME}.${SESSION}${_SCAN}.${TIMESTAMP}
  WORKING_DIR_BASENAME: ${DIR_PREFIX}.XNAT_PROCESS_DATA
  WORKING_DIR: ${BUILD_SPACE}/$WORKING_DIR_BASENAME
  CHECK_DATA_DIR: ${BUILD_SPACE}/${DIR_PREFIX}.XNAT_CHECK_DATA
  MARK_COMPLETION_DIR: ${BUILD_SPACE}/${DIR_PREFIX}.XNAT_MARK_COMPLETE_RUNNING_STATUS
  SCRIPTNAME: ${SESSION}${_SCAN}.${PIPELINE_NAME}
  STARTTIME_FILE_NAME: ${WORKING_DIR}/${SESSION}/ProcessingInfo/${SESSION}${_SCAN}.${PIPELINE_NAME}.starttime


functional: &functional
  <<: *default
  PROCESS_DATA_BINDPATH: "$GRADIENT_COEFFICIENT_PATH,$ARCHIVE_ROOT,$SINGULARITY_BIND_PATH"
  OUTPUT_RESOURCE_NAME: ${SCAN}_preproc
  WALLTIME_LIMIT_HOURS: 24
  BUILD_DIR: $HOME/XNAT_BUILD_DIR/$USER
  PUT_SERVER_LIST: hcpi-shadow11.nrg.wustl.edu hcpi-shadow12.nrg.wustl.edu hcpi-shadow13.nrg.wustl.edu hcpi-shadow14.nrg.wustl.edu hcpi-shadow15.nrg.wustl.edu hcpi-shadow16.nrg.wustl.edu hcpi-shadow17.nrg.wustl.edu hcpi-shadow18.nrg.wustl.edu hcpi-shadow19.nrg.wustl.edu
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build_ssd

functional_preprocess_CCF_BWH:
  <<: *functional

functional_preprocess_CCF_HCA:
  <<: *functional

functional_preprocess_CCF_HCD:
  <<: *functional
  WALLTIME_LIMIT_HOURS: 48

structural_process: &structural_process
  PROCESS_DATA_BINDPATH: "$GRADIENT_COEFFICIENT_PATH,$ARCHIVE_ROOT,$SINGULARITY_BIND_PATH,$BUILD_SPACE,$SCRATCH_SPACE"

hand_edit: &hand_edit
  <<: *default
  <<: *structural_process
  MEM_LIMIT_GBS: 64
  OUTPUT_RESOURCE_NAME: Structural_preproc_handedit
  PUT_SERVER_LIST: hcpi-shadow11.nrg.wustl.edu hcpi-shadow12.nrg.wustl.edu hcpi-shadow13.nrg.wustl.edu hcpi-shadow14.nrg.wustl.edu hcpi-shadow15.nrg.wustl.edu hcpi-shadow16.nrg.wustl.edu hcpi-shadow17.nrg.wustl.edu hcpi-shadow18.nrg.wustl.edu hcpi-shadow19.nrg.wustl.edu
  HAND_EDIT_PROCESSING_DIR: /scratch/$USER/hand_edit_buildspace

hand_edit_CCF_HCA:
  <<: *hand_edit
  BUILD_DIR: $HOME/XNAT_OLDBUILD_DIR/$USER
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build,/scratch/$USER/hand_edit_buildspace
  WALLTIME_LIMIT_HOURS: 120

hand_edit_CCF_HCD:
  <<: *hand_edit
  BUILD_DIR: $HOME/XNAT_BUILD_DIR/$USER
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build_ssd,/scratch/$USER/hand_edit_buildspace

msmall: &msmall
  <<: *default
  SCRATCH_TMP_DIR: /scratch/$USER/singularity/tmp/$SESSION
  PROCESS_DATA_BINDPATH: "$GRADIENT_COEFFICIENT_PATH,$ARCHIVE_ROOT,$SINGULARITY_BIND_PATH,$SCRATCH_TMP_DIR:/tmp"
  WALLTIME_LIMIT_HOURS: 20
  OUTPUT_RESOURCE_NAME: MsmAll_proc
  BUILD_DIR: $HOME/XNAT_BUILD_DIR/$USER/msmall_Q2_2020_runs
  PUT_SERVER_LIST: hcpi-shadow11.nrg.wustl.edu hcpi-shadow12.nrg.wustl.edu hcpi-shadow13.nrg.wustl.edu hcpi-shadow14.nrg.wustl.edu hcpi-shadow15.nrg.wustl.edu hcpi-shadow16.nrg.wustl.edu hcpi-shadow17.nrg.wustl.edu hcpi-shadow18.nrg.wustl.edu hcpi-shadow19.nrg.wustl.edu
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build_ssd

msmall_process_CCF_HCA:
  <<: *msmall

msmall_process_CCF_HCD:
  <<: *msmall

multirunicafix: &multirunicafix
  <<: *default
  PROCESS_PBS_HASWELL: False
  WALLTIME_LIMIT_HOURS: 48
  MEM_LIMIT_GBS: 48
  OUTPUT_RESOURCE_NAME: MultiRunIcaFix_proc
  BUILD_DIR: $HOME/XNAT_BUILD_DIR/$USER/icafix_Q2_2020_runs
  PUT_SERVER_LIST: hcpi-shadow11.nrg.wustl.edu hcpi-shadow12.nrg.wustl.edu hcpi-shadow13.nrg.wustl.edu hcpi-shadow14.nrg.wustl.edu hcpi-shadow15.nrg.wustl.edu hcpi-shadow16.nrg.wustl.edu hcpi-shadow17.nrg.wustl.edu hcpi-shadow18.nrg.wustl.edu hcpi-shadow19.nrg.wustl.edu
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build_ssd

multirunicafix_process_CCF_HCA:
  <<: *multirunicafix


multirunicafix_process_CCF_HCD:
  <<: *multirunicafix

structural_preprocess: &structural_preprocess
  <<: *default
  <<: *structural_process
  USE_PRESCAN_NORMALIZED: False
  OUTPUT_RESOURCE_NAME: Structural_preproc
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build
  BUILD_DIR: $HOME/XNAT_OLDBUILD_DIR/$USER/ls_struc_preproc
  USE_SCRATCH_FOR_PROCESSING: True

structural_preprocess_CCF_BWH:
  <<: *structural_preprocess
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build_ssd
  BUILD_DIR: $HOME/XNAT_BUILD_DIR/$USER/bwh_struc_preproc

structural_preprocess_CCF_HCA:
  <<: *structural_preprocess

structural_preprocess_CCF_HCD:
  <<: *structural_preprocess

structural_preprocess_CCF_MDD:
  <<: *structural_preprocess
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build_ssd
  BUILD_DIR: $HOME/XNAT_BUILD_DIR/$USER/mdd_struc_preproc

diffusion_preprocess: &diffusion_preprocess
  <<: *default
  PROCESS_PBS_HASWELL: False
  PROCESS_PBS_K20X: True
  PROCESS_PBS_GPU: 1
  PROCESS_NVIDIA: True
  OUTPUT_RESOURCE_NAME: Diffusion_preproc
  SINGULARITY_BIND_PATH: /NRG-data/NRG/intradb/build_ssd
  QUNEX_CONTAINER: /export/HCP/qunex-hcp/production_containers/qunex_0.62.4.sif
  BUILD_DIR: $HOME/XNAT_BUILD_DIR/$USER/diffusion_preproc
  USE_SCRATCH_FOR_PROCESSING: False
  WALLTIME_LIMIT_HOURS: 72
  MEM_LIMIT_GBS: 32

diffusion_preprocess_CCF_HCA:
  <<: *diffusion_preprocess

diffusion_preprocess_CCF_HCD:
  <<: *diffusion_preprocess

